# JealPrototypeTest Fullstack Architecture Document

## Table of Contents

- [JealPrototypeTest Fullstack Architecture Document](#table-of-contents)
  - [Table of Contents](./table-of-contents.md)
  - [1. Introduction](./1-introduction.md)
    - [Starter Template or Existing Project](./1-introduction.md#starter-template-or-existing-project)
    - [Introduction Content](./1-introduction.md#introduction-content)
    - [Change Log](./1-introduction.md#change-log)
  - [2. High Level Architecture](./2-high-level-architecture.md)
    - [Technical Summary](./2-high-level-architecture.md#technical-summary)
    - [Platform and Infrastructure Choice](./2-high-level-architecture.md#platform-and-infrastructure-choice)
    - [Repository Structure](./2-high-level-architecture.md#repository-structure)
    - [High Level Architecture Diagram](./2-high-level-architecture.md#high-level-architecture-diagram)
    - [Architectural Patterns](./2-high-level-architecture.md#architectural-patterns)
  - [3. Tech Stack](./3-tech-stack.md)
    - [Technology Stack Table](./3-tech-stack.md#technology-stack-table)
    - [Key Technology Decisions](./3-tech-stack.md#key-technology-decisions)
    - [Dependencies Installation Commands](./3-tech-stack.md#dependencies-installation-commands)
  - [4. Data Models](./4-data-models.md)
    - [Dealership](./4-data-models.md#dealership)
      - [TypeScript Interface (documentation only - implement in plain JavaScript)](./4-data-models.md#typescript-interface-documentation-only-implement-in-plain-javascript)
      - [PostgreSQL Table Definition](./4-data-models.md#postgresql-table-definition)
      - [Relationships](./4-data-models.md#relationships)
    - [Vehicle](./4-data-models.md#vehicle)
      - [TypeScript Interface (documentation only)](./4-data-models.md#typescript-interface-documentation-only)
      - [PostgreSQL Table Definition](./4-data-models.md#postgresql-table-definition)
      - [Relationships](./4-data-models.md#relationships)
    - [Lead](./4-data-models.md#lead)
      - [TypeScript Interface (documentation only)](./4-data-models.md#typescript-interface-documentation-only)
      - [PostgreSQL Table Definition](./4-data-models.md#postgresql-table-definition)
      - [Relationships](./4-data-models.md#relationships)
    - [Entity Relationship Diagram](./4-data-models.md#entity-relationship-diagram)
    - [Multi-Tenancy Data Isolation](./4-data-models.md#multi-tenancy-data-isolation)
    - [Implementation Notes](./4-data-models.md#implementation-notes)
  - [5. API Specification](./5-api-specification.md)
    - [Base URL](./5-api-specification.md#base-url)
    - [API Endpoints Overview](./5-api-specification.md#api-endpoints-overview)
    - [Authentication Endpoints](./5-api-specification.md#authentication-endpoints)
      - [POST /api/auth/login](./5-api-specification.md#post-apiauthlogin)
      - [POST /api/auth/logout](./5-api-specification.md#post-apiauthlogout)
      - [GET /api/auth/me](./5-api-specification.md#get-apiauthme)
    - [Dealership Endpoints](./5-api-specification.md#dealership-endpoints)
      - [GET /api/dealers](./5-api-specification.md#get-apidealers)
      - [GET /api/dealers/:id](./5-api-specification.md#get-apidealersid)
      - [PUT /api/dealers/:id (Auth Required)](./5-api-specification.md#put-apidealersid-auth-required)
    - [Vehicle Endpoints](./5-api-specification.md#vehicle-endpoints)
      - [GET /api/vehicles](./5-api-specification.md#get-apivehicles)
      - [GET /api/vehicles/:id](./5-api-specification.md#get-apivehiclesid)
      - [POST /api/vehicles (Auth Required)](./5-api-specification.md#post-apivehicles-auth-required)
      - [PUT /api/vehicles/:id (Auth Required)](./5-api-specification.md#put-apivehiclesid-auth-required)
      - [DELETE /api/vehicles/:id (Auth Required)](./5-api-specification.md#delete-apivehiclesid-auth-required)
    - [Lead Endpoints](./5-api-specification.md#lead-endpoints)
      - [GET /api/leads (Auth Required)](./5-api-specification.md#get-apileads-auth-required)
      - [POST /api/leads](./5-api-specification.md#post-apileads)
    - [Upload Endpoint](./5-api-specification.md#upload-endpoint)
      - [POST /api/upload (Auth Required)](./5-api-specification.md#post-apiupload-auth-required)
    - [Auth Middleware](./5-api-specification.md#auth-middleware)
    - [Error Handling](./5-api-specification.md#error-handling)
    - [React Frontend API Calls](./5-api-specification.md#react-frontend-api-calls)
  - [6. Components](./6-components.md)
    - [Backend Components](./6-components.md#backend-components)
      - [File Structure](./6-components.md#file-structure)
      - [server.js](./6-components.md#serverjs)
      - [routes/*.js](./6-components.md#routesjs)
      - [db/*.js](./6-components.md#dbjs)
      - [middleware/auth.js](./6-components.md#middlewareauthjs)
    - [Frontend Components](./6-components.md#frontend-components)
      - [File Structure](./6-components.md#file-structure)
      - [Public Pages](./6-components.md#public-pages)
      - [Admin Pages](./6-components.md#admin-pages)
      - [Shared Components](./6-components.md#shared-components)
      - [context/AdminContext.jsx](./6-components.md#contextadmincontextjsx)
  - [7. External APIs - Cloudinary Integration](./7-external-apis-cloudinary-integration.md)
    - [Cloudinary Account Setup (5 minutes)](./7-external-apis-cloudinary-integration.md#cloudinary-account-setup-5-minutes)
    - [Environment Variables](./7-external-apis-cloudinary-integration.md#environment-variables)
    - [Frontend Integration - Upload Widget](./7-external-apis-cloudinary-integration.md#frontend-integration-upload-widget)
    - [Usage in VehicleForm.jsx (Multiple Images)](./7-external-apis-cloudinary-integration.md#usage-in-vehicleformjsx-multiple-images)
    - [Usage in DealerSettings.jsx (Single Logo)](./7-external-apis-cloudinary-integration.md#usage-in-dealersettingsjsx-single-logo)
    - [Displaying Images on Public Site](./7-external-apis-cloudinary-integration.md#displaying-images-on-public-site)
    - [Vehicle Detail - Image Gallery](./7-external-apis-cloudinary-integration.md#vehicle-detail-image-gallery)
    - [What URLs to Store in Database](./7-external-apis-cloudinary-integration.md#what-urls-to-store-in-database)
    - [Free Tier Limits](./7-external-apis-cloudinary-integration.md#free-tier-limits)
    - [Testing Checklist](./7-external-apis-cloudinary-integration.md#testing-checklist)
    - [Quick Setup Summary](./7-external-apis-cloudinary-integration.md#quick-setup-summary)
  - [8. Database Schema](./8-database-schema.md)
    - [Complete Schema Script](./8-database-schema.md#complete-schema-script)
    - [Seed Data Script](./8-database-schema.md#seed-data-script)
    - [Running Scripts on Railway](./8-database-schema.md#running-scripts-on-railway)
  - [9. Source Tree](./9-source-tree.md)
    - [Root Directory](./9-source-tree.md#root-directory)
    - [Root Files](./9-source-tree.md#root-files)
  - [Tech Stack](#tech-stack)
  - [Project Structure](#project-structure)
  - [Deployment](#deployment)
  - [10. Development Workflow](./10-development-workflow.md)
    - [Part 1: Local Development Setup (30-45 minutes)](./10-development-workflow.md#part-1-local-development-setup-30-45-minutes)
    - [Part 2: Testing Core Flows](./10-development-workflow.md#part-2-testing-core-flows)
    - [Part 3: Railway Production Deployment](./10-development-workflow.md#part-3-railway-production-deployment)
  - [11. Coding Standards](./11-coding-standards.md)
    - [JSDoc Documentation Requirements](./11-coding-standards.md#jsdoc-documentation-requirements)
    - [Dynamic Theming with CSS Custom Properties](./11-coding-standards.md#dynamic-theming-with-css-custom-properties)
  - [11.1 Dynamic Theme Color Management System](./theming-system.md)
    - [Overview](./theming-system.md#overview)
    - [Why CSS Custom Properties?](./theming-system.md#why-css-custom-properties)
    - [Architecture Components](./theming-system.md#architecture-components)
    - [Data Flow](./theming-system.md#data-flow)
    - [Usage Guidelines](./theming-system.md#usage-guidelines)
  - [12. Security Guidelines](./12-security-guidelines.md) ⚠️ **MANDATORY**
    - [Overview](./12-security-guidelines.md#overview)
    - [Critical Security Requirements](./12-security-guidelines.md#critical-security-requirements)
      - [1. Multi-Tenancy Data Isolation (SEC-001)](./12-security-guidelines.md#1-multi-tenancy-data-isolation-sec-001)
      - [2. XSS Prevention](./12-security-guidelines.md#2-xss-prevention-cross-site-scripting)
      - [3. SQL Injection Prevention](./12-security-guidelines.md#3-sql-injection-prevention)
      - [4. Input Length Validation](./12-security-guidelines.md#4-input-length-validation)
      - [5. Input Format Validation](./12-security-guidelines.md#5-input-format-validation)
      - [6. Rate Limiting](./12-security-guidelines.md#6-rate-limiting)
    - [Security Checklist for New Endpoints](./12-security-guidelines.md#security-checklist-for-new-endpoints)
    - [Testing Requirements](./12-security-guidelines.md#testing-requirements)
    - [Security Anti-Patterns to Avoid](./12-security-guidelines.md#security-anti-patterns-to-avoid)
    - [Quick Reference: Security Functions Library](./12-security-guidelines.md#quick-reference-security-functions-library)
  - [13. 2-Day Implementation Checklist](./13-2-day-implementation-checklist.md)
